<!--
// Copyright (c) 2025 Nishan Hossepian. All rights reserved.              
// Free to use, modify, and distribute under the terms of the MIT license.
// See the LICENSE file in the project root for full license information.
-->
<UserControl
    x:Class="OpenSilverPdfViewer.Controls.PageViewer"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:native="clr-namespace:CSHTML5.Native.Html.Controls;assembly=OpenSilver"    
    xmlns:local="clr-namespace:OpenSilverPdfViewer.Controls"
    SizeChanged="Preview_SizeChanged">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/OpenSilverPdfViewer;component/Styles/BrushStyles.xaml"/>
                <ResourceDictionary Source="/OpenSilverPdfViewer;component/Styles/ScrollBarStyles.xaml"/>
                <ResourceDictionary Source="/OpenSilverPdfViewer;component/Styles/ToolBarButtonStyles.xaml"/>
                <ResourceDictionary Source="/OpenSilverPdfViewer;component/Styles/ComboBoxStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Border>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Grid Margin="10,10,10,3">
                    <Canvas 
                        x:Name="pageImageCanvas" 
                        ClipToBounds="True"
                        Background="Transparent">
                    </Canvas>
                    <native:HtmlPresenter>
                        <canvas id="pageViewCanvas"/>
                    </native:HtmlPresenter>
                </Grid>
                <ScrollBar 
                    x:Name="pageScrollBarHorz"
                    Style="{StaticResource CMSScrollBarHorizontal}"
                    Scroll="PageScrollHorz_Scroll"
                    Margin="7,0,0,3"
                    Grid.Row="1"
                    Orientation="Horizontal"
                    Minimum="0"
                    ViewportSize="250"
                    Maximum="100"
                    Value="0"/>
                <ScrollBar 
                    x:Name="pageScrollBarVert"
                    Style="{StaticResource CMSScrollBarVertical}"
                    Scroll="PageScrollVert_Scroll"
                    Grid.Column="1"
                    Orientation="Vertical"
                    Margin="0,7,3,0"
                    ViewportSize="200"
                    Minimum="0"
                    Maximum="100"
                    Value="0"/>
            </Grid>
        </Border>
        <Border 
            Grid.Row="1"
            Padding="10"
            BorderBrush="{StaticResource CMSSolidBorderBrush}"
            BorderThickness="0,1,0,0"
            Background="{StaticResource ToolbarBackgroundBrush}">
            <Grid VerticalAlignment="Center">
                <local:PageZoomCtrl 
                    ZoomLevel="{Binding PageZoomLevel, Mode=TwoWay}"
                    HorizontalAlignment="Left"/>
                <local:PageNavigationCtrl 
                    NavigationPage="{Binding CurrentPage, Mode=TwoWay}"
                    PageCount="{Binding PageCount}"/>
                <StackPanel
                    HorizontalAlignment="Right"
                    Orientation="Horizontal">
                    <local:ToolBarButton
                        ShadowThickness="1,0,1,1"
                        DisabledMargin="1"
                        CornerRadius="3,0,0,3">
                        <Image
                            Width="20"
                            Source="/OpenSilverPdfViewer;component/Assets/pageview.png"/>
                    </local:ToolBarButton>
                    <local:ToolBarButton
                        ShadowThickness="1,0,1,1"
                        DisabledMargin="1"
                        CornerRadius="0,3,3,0">
                        <Image
                            Width="20"
                            Source="/OpenSilverPdfViewer;component/Assets/thumbview.png"/>
                    </local:ToolBarButton>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>
